{
  "version": 3,
  "sources": ["../../wouter/src/use-hash-location.js"],
  "sourcesContent": ["import { useSyncExternalStore } from \"./react-deps.js\";\n\n// array of callback subscribed to hash updates\nconst listeners = {\n  v: [],\n};\n\nconst onHashChange = () => listeners.v.forEach((cb) => cb());\n\n// we subscribe to `hashchange` only once when needed to guarantee that\n// all listeners are called synchronously\nconst subscribeToHashUpdates = (callback) => {\n  if (listeners.v.push(callback) === 1)\n    addEventListener(\"hashchange\", onHashChange);\n\n  return () => {\n    listeners.v = listeners.v.filter((i) => i !== callback);\n    if (!listeners.v.length) removeEventListener(\"hashchange\", onHashChange);\n  };\n};\n\n// leading '#' is ignored, leading '/' is optional\nconst currentHashLocation = () => \"/\" + location.hash.replace(/^#?\\/?/, \"\");\n\nexport const navigate = (to, { state = null, replace = false } = {}) => {\n  const oldURL = location.href;\n\n  const [hash, search] = to.replace(/^#?\\/?/, \"\").split(\"?\");\n\n  // Works for ALL protocols including data:\n  const url = new URL(location.href);\n  url.hash = `/${hash}`;\n  if (search) url.search = search;\n  const newURL = url.href;\n\n  if (replace) {\n    history.replaceState(state, \"\", newURL);\n  } else {\n    history.pushState(state, \"\", newURL);\n  }\n\n  const event =\n    typeof HashChangeEvent !== \"undefined\"\n      ? new HashChangeEvent(\"hashchange\", { oldURL, newURL })\n      : new Event(\"hashchange\", { detail: { oldURL, newURL } });\n\n  dispatchEvent(event);\n};\n\nexport const useHashLocation = ({ ssrPath = \"/\" } = {}) => [\n  useSyncExternalStore(\n    subscribeToHashUpdates,\n    currentHashLocation,\n    () => ssrPath\n  ),\n  navigate,\n];\n\nuseHashLocation.hrefs = (href) => \"#\" + href;\n"],
  "mappings": ";;;;;;;;AAGA,IAAM,YAAY;AAAA,EAChB,GAAG,CAAC;AACN;AAEA,IAAM,eAAe,MAAM,UAAU,EAAE,QAAQ,CAAC,OAAO,GAAG,CAAC;AAI3D,IAAM,yBAAyB,CAAC,aAAa;AAC3C,MAAI,UAAU,EAAE,KAAK,QAAQ,MAAM;AACjC,qBAAiB,cAAc,YAAY;AAE7C,SAAO,MAAM;AACX,cAAU,IAAI,UAAU,EAAE,OAAO,CAAC,MAAM,MAAM,QAAQ;AACtD,QAAI,CAAC,UAAU,EAAE,OAAQ,qBAAoB,cAAc,YAAY;AAAA,EACzE;AACF;AAGA,IAAM,sBAAsB,MAAM,MAAM,SAAS,KAAK,QAAQ,UAAU,EAAE;AAEnE,IAAM,WAAW,CAAC,IAAI,EAAE,QAAQ,MAAM,UAAU,MAAM,IAAI,CAAC,MAAM;AACtE,QAAM,SAAS,SAAS;AAExB,QAAM,CAAC,MAAM,MAAM,IAAI,GAAG,QAAQ,UAAU,EAAE,EAAE,MAAM,GAAG;AAGzD,QAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,MAAI,OAAO,IAAI,IAAI;AACnB,MAAI,OAAQ,KAAI,SAAS;AACzB,QAAM,SAAS,IAAI;AAEnB,MAAI,SAAS;AACX,YAAQ,aAAa,OAAO,IAAI,MAAM;AAAA,EACxC,OAAO;AACL,YAAQ,UAAU,OAAO,IAAI,MAAM;AAAA,EACrC;AAEA,QAAM,QACJ,OAAO,oBAAoB,cACvB,IAAI,gBAAgB,cAAc,EAAE,QAAQ,OAAO,CAAC,IACpD,IAAI,MAAM,cAAc,EAAE,QAAQ,EAAE,QAAQ,OAAO,EAAE,CAAC;AAE5D,gBAAc,KAAK;AACrB;AAEO,IAAM,kBAAkB,CAAC,EAAE,UAAU,IAAI,IAAI,CAAC,MAAM;AAAA,MACzD;AAAA,IACE;AAAA,IACA;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AACF;AAEA,gBAAgB,QAAQ,CAAC,SAAS,MAAM;",
  "names": []
}
